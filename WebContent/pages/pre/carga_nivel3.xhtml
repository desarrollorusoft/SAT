<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:p="http://primefaces.org/ui">

	<h:body>
		<ui:composition template="/templates/comun_publico.xhtml">
			
			<ui:define name="titulo-pagina">Carga Nivel 3</ui:define>
			
			<ui:define name="contenido">
				
				<div class="box animated fadeInDown">
					<div>
						<div class="contenedor">
				
							<div class="row ">
								<div class="col-xs-12">
									<div class="tributo-container arriba-25">
										<h3 class="color-azul-primary">
									        <strong>Datos</strong>
									    </h3>
									</div>
								</div>
									
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="CUIT/CUIL *" for="cuit"/>
										<p:inputMask id="cuit" 
													 value ="#{CargaNivel3.cuit}" 
													 mask="99-99999999-9" 
													 styleClass="form-control" 
												     placeholder="CUIT..." />
									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="Nombre *" for="nombre"/>
						
										<h:inputText id="nombre" 
													 value="#{CargaNivel3.nombre}" 
													 styleClass="form-control"/>
										<p:watermark for="nombre" value="Nombre..." id="wnombre" />					 
									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="Apellido *" for="apellido"/>
						
										<h:inputText id="apellido" 
													 value="#{CargaNivel3.apellido}" 
													 styleClass="form-control"/>
										<p:watermark for="apellido" value="Apellido..." id="wapellido" />					 
									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="Correo *" for="correo"/>
										<h:inputText id="correo"
													 value="#{CargaNivel3.correo}" 
													 styleClass="form-control"/>
										<p:watermark for="correo" value="Correo..." id="wcorreo" />		
									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="Teléfono *" for="telefono"/>
										<p:inputMask id="telefono" 
													 value ="#{CargaNivel3.telefono}" 
													 mask="(999)-9999-9999"
													 styleClass="form-control" 
												     placeholder="Teléfono..."/>
									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="Celular *" for="celular"/>
										<p:inputMask id="celular" 
													 value ="#{CargaNivel3.celular}" 
													 mask="(999)-9999-9999"
													 styleClass="form-control" 
												     placeholder="Celular..."/>
									</div>
								</div>
								
								<div class="col-sm-3">
									<div class="form-group">
										<p:outputLabel value="Tipo Documento *" for="tipoDocumentoN3"/>
										<h:selectOneMenu value="#{CargaNivel3.tipoDocumento}" id="tipoDocumentoN3"
													     styleClass="form-control ng-pristine ng-valid ng-touched">
											<f:selectItems value="#{CargaNivel3.obtenerTiposDocumento()}" 
														   var="tipo" 
														   itemLabel="#{tipo}" 
														   itemValue="#{tipo}"/>
										</h:selectOneMenu>
									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<label>Nro. Documento *</label>
										<p:inputText value="#{CargaNivel3.nroDocumento}"
													 placeholder="Nro. Documento"
													 maxlength="10"
													 styleClass="form-control"/>
									</div>
								</div>
								
								<hr class="color-azul-primary"/>
								<br/>
								<div class="col-sm-12">								
									<div class="tributo-container arriba-25">
										<h3 class="color-azul-primary">
									        <strong>Cuentas</strong>
									    </h3>
									</div>
								</div>
								
								<div class="col-xs-5">
					              	<div class="form-group">
					                	<label>Tributo</label>
						                <h:selectOneMenu value="#{CargaNivel3.tipoCuenta}"
						                				 id="TiposCuentasN3"
						                				 styleClass="form-control ng-pristine ng-valid ng-touched">
						                	<f:selectItems value="#{CargaNivel3.tiposCuenta}" var="tipo" itemLabel="#{tipo.nombre}" itemValue="#{tipo}"/>
						                	<p:ajax event="change" update="datosBusqueda"/>
						                </h:selectOneMenu>
					            	</div>
					          	</div>
								
								<div class="col-xs-7">
									<p:outputPanel id="datosBusqueda">
							            <div class="col-xs-5">
							              	<div class="form-group">
								                <ui:fragment rendered="#{CargaNivel3.muestroCuenta()}">
								                	<label><h:outputText value="Cuenta" /></label>
								                	<p:inputText value="#{CargaNivel3.padron}" 
								                				 styleClass="form-control ng-untouched ng-pristine ng-invalid"
								                				 maxlength="6"
								                				 placeholder="Número de Padrón"/>
								                </ui:fragment>
				
								                <ui:fragment rendered="#{CargaNivel3.muestroCuit()}">
								                	<label><h:outputText value="Cuit" /></label>
								                	<p:inputMask value="#{CargaNivel3.padron}" 
								                				 styleClass="form-control ng-untouched ng-pristine ng-invalid"
								                				 mask="99-99999999-9"
								                				 placeholder="CUIT del Comercio"/>
								                </ui:fragment>
				
												<ui:fragment rendered="#{CargaNivel3.muestroDominio()}">
													<label><h:outputText value="Dominio" /></label>
													<p:inputText value="#{CargaNivel3.padron}"
																 styleClass="form-control ng-untouched ng-pristine ng-invalid"
																 maxlength="7"
																 placeholder="Dominio"/>
												</ui:fragment>
											</div>
						              	</div>
						              	
						              	<div class="col-xs-2 no-padding arriba-25">
						              		<p:commandButton id="buscarCuenta"
						              						 action="#{CargaNivel3.buscarCuenta()}"
															 styleClass="sin-correr btn btn-primary fa fa-search btn-circle no-padding"
															 value=""
															 onclick="PF('bloqueoPantalla').show();"
															 oncomplete="PF('bloqueoPantalla').hide()"
															 update="tablaCuentasBuscadas" />
											<p:tooltip styleClass="tooltip" for="buscarCuenta" value="Buscar cuenta" position="left"/>
					                    </div>
						            </p:outputPanel>		
					            </div>					
										
								<div class="col-xs-12">
					        		<p:dataTable id="tablaCuentasBuscadas"
					        					 value="#{CargaNivel3.listaCuentasBuscadas}"
					        					 var="cuenta"
					        					 rowKey="#{cuenta.hashCode()}"
					            				 styleClass="table tabla-cuentas table-striped sin-bordes-costado text-center"
					            				 emptyMessage=" ">
					            		
					            		<p:column headerText="Tributo" width="210">
					            			<h:outputText value="#{cuenta.tipoCuenta.nombre}" />
					            		</p:column>
				
										<p:column headerText="Dato" width="100">
											<h:outputText value="#{cuenta.datoCuenta}" />
										</p:column>
										
										<p:column headerText="Descripción">
					            			<h:outputText value="#{cuenta.descripcion}" />
					            		</p:column>
										
										<p:column headerText="Acción" width="100">
											<p:commandButton id="agregarCuenta"
															 action="#{CargaNivel3.asignarCuenta(cuenta)}"
															 value=""
															 styleClass="btn btn-outline-secondary btn-circle fa fa-plus no-padding oculto sin-correr"
															 update=":form:tablaCuentasAsignadas tablaCuentasBuscadas :form:datosBusqueda" />
											<p:tooltip styleClass="tooltip" for="agregarCuenta" value="Asociar Cuenta" position="left"/>
					            		</p:column>
									</p:dataTable>
						        </div>
						        
						        <div class="col-xs-12 ng-untouched ng-pristine ng-invalid">
						        	<hr class="color-azul-primary"/>
						          	<h3 class="color-azul-primary">Cuentas Agregadas</h3>
							        <div class="col-xs-12">
							            <div class="row">
							            	<p:dataTable id="tablaCuentasAsignadas"
							            				 value="#{CargaNivel3.listaCuentasAsignadas}"
							            				 var="cuenta"
							            				 emptyMessage="No hay cuentas asociadas"
							            				 rowKey="#{cuenta.hashCode()}"
							            				 styleClass="table tabla-cuentas table-striped sin-bordes-costado text-center">
							            	
							            		<p:column headerText="Tributo" width="210">
							            			<h:outputText value="#{cuenta.tipoCuenta.nombre}" />
							            		</p:column>
												
												<p:column headerText="#{CargaNivel3.labelDenominacion}" width="100">
							            			<h:outputText value="#{cuenta.datoCuenta}" />
							            		</p:column>
												
												<p:column headerText="Descripción">
							            			<h:outputText value="#{cuenta.descripcion}" />
							            		</p:column>
												
												<p:column headerText="Acción" width="100">
													<p:commandButton id="desvincularCuenta"
																	 action="#{CargaNivel3.desvincularCuenta(cuenta)}"
																	 value=""
																	 styleClass="btn btn-outline-secondary sin-correr btn-circle fa fa-times no-padding oculto arriba-25"
																	 update="tablaCuentasAsignadas :form:tablaCuentasBuscadas" />
													<p:tooltip styleClass="tooltip" for="desvincularCuenta" value="Desvincular Cuenta" position="left"/>
							            		</p:column>
							            	</p:dataTable>
							            </div>
							        </div>
						        </div>
								
								<div class ="col-xs-12 button-footer">
									<div class="pull-left">
										<p:commandButton value="" 
														 styleClass="btn btn-default btn-outline btn-circle fa fa-undo sin-texto" 
														 action="#{CargaNivel3.blanquear()}"
														 update=":form"/>								
									</div>
									<div class="pull-right">
										<p:commandButton id="botonEnviarFormulario" 
														 value="ENVIAR" 
														 styleClass="btn btn-primary btn-rounded" 
														 action="#{CargaNivel3.confirmar()}"
														 update=":form"
														 onclick="PF('bloqueoPantalla').show();"
													 	 oncomplete="PF('bloqueoPantalla').hide()"/>								
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>		
			</ui:define>
			
		</ui:composition>
	</h:body>
</html>